{"version":3,"file":"ng-swipe-card.umd.js.map","sources":["ng://ng-swipe-card/lib/swipe-card.config.ts","ng://ng-swipe-card/lib/swipeable.directive.ts","ng://ng-swipe-card/lib/card-wrapper.component.ts","ng://ng-swipe-card/lib/swipe-card-lib.module.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\n\nexport class SWSwipeCardConfig {\n  likeColor?: string = '104,159,56';\n  dislikeColor?: string = '193,3,2';\n}\n\nexport const SW_SWIPE_CARD_DEFAULT_OPTIONS = new InjectionToken('sw-swipe-card-default-options', {\n  providedIn: 'root',\n  factory: SW_SWIPE_CARD_DEFAULT_OPTIONS_FACTORY\n});\n\nexport function SW_SWIPE_CARD_DEFAULT_OPTIONS_FACTORY() {\n  return new SWSwipeCardConfig();\n}\n","import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output, Renderer2,\n} from '@angular/core';\nimport {SW_SWIPE_CARD_DEFAULT_OPTIONS, SWSwipeCardConfig} from './swipe-card.config';\n\n@Directive({\n  selector: '[swSwipeable]',\n})\nexport class SwipeableDirective implements OnInit, OnDestroy {\n  private readonly animationDuration = 200;\n  private isReleased: Boolean = false;\n  private element: HTMLElement;\n  private overlay: HTMLElement;\n  private releaseRadius: { x: number, y: number };\n  private timeoutId: number;\n\n  @HostBinding('style.width.px')\n  @Input()\n  public width: number;\n\n  @HostBinding('style.height.px')\n  @Input()\n  public height: number;\n\n  @Input()\n  public fixed: Boolean = false;\n\n  @Input()\n  public orientation = 'xy';\n\n  @Output()\n  public released = new EventEmitter();\n\n  @Output()\n  public swiped = new EventEmitter<boolean>();\n\n  @HostBinding('class.swipe-card-heap')\n  public className = true;\n\n  @HostListener('pan', ['$event'])\n  onPan(event: any) {\n    if (this.allowSwipe) {\n      this.handleSwipeChange(event);\n    }\n  }\n\n  @HostListener('panend', ['$event'])\n  onPanEnd(event: any) {\n    if (this.allowSwipe) {\n      const conditionX = this.orientation.includes('x') && this.releaseRadius.x < Math.abs(event.deltaX || 0);\n      const conditionY = this.orientation.includes('y') && this.releaseRadius.y < Math.abs(event.deltaY || 0);\n      const like = this.isSwipePositive(event);\n\n      (conditionX || conditionY) ? this.handleSwipeEnd(like) : this.handleCancelSwipe();\n    }\n  }\n\n  get allowSwipe(): boolean {\n    return !this.fixed && !this.isReleased;\n  }\n\n  constructor(@Inject(SW_SWIPE_CARD_DEFAULT_OPTIONS) private _defaultConfig: SWSwipeCardConfig,\n              protected el: ElementRef,\n              public renderer: Renderer2) {\n    this.element = el.nativeElement;\n  }\n\n  ngOnDestroy(): void {\n    window.clearTimeout(this.timeoutId);\n  }\n\n  ngOnInit(): void {\n    this.initializeOverlay();\n    this.releaseRadius = {x: this.width / 4, y: this.height / 4};\n  }\n\n  private initializeOverlay(): void {\n    this.overlay = document.createElement('div');\n    this.overlay.className = 'swipe-card-overlay';\n    this.renderer.appendChild(this.element, this.overlay);\n  }\n\n  private translate({x, y, rotate = 0, duration = 0}) {\n    const positionX = x && this.orientation.includes('x') ? (x) : 0;\n    const positionY = y && this.orientation.includes('y') ? (y) : 0;\n\n    this.renderer.setStyle(this.element, 'transition', `transform ${duration}ms ease`);\n    this.renderer.setStyle(this.element, 'webkitTransform', `translate3d(${positionX}px, ${positionY}px, 0) rotate(${rotate}deg)`\n    );\n  }\n\n  private handleSwipeChange(event: any) {\n    const like = this.isSwipePositive(event);\n    const opacity = Math.abs(event.distance) * 0.5 / this.element.offsetWidth;\n\n    this.setBackgroundOverlay(like, opacity);\n    this.translate({\n      x: event.deltaX,\n      y: event.deltaY,\n      rotate: ((event.deltaX * 20) / this.element.clientWidth)\n    });\n  }\n\n  private handleCancelSwipe() {\n    this.resetBackgroundOverlay();\n    this.translate({\n      x: 0,\n      y: 0,\n      rotate: 0,\n      duration: this.animationDuration\n    });\n  }\n\n  private destroy() {\n    this.resetElementStyles();\n    this.resetBackgroundOverlay();\n    this.renderer.removeChild(this.element, this.overlay);\n    this.overlay = null;\n  }\n\n  private setBackgroundOverlay(like: boolean, opacity: number) {\n    const color = like ? this._defaultConfig.likeColor : this._defaultConfig.dislikeColor;\n\n    this.renderer.setStyle(this.overlay, 'transition', 'opacity 0s ease');\n    this.renderer.setStyle(this.overlay, 'background-color', `rgba(${color}, ${opacity.toString()})`);\n  }\n\n  private resetBackgroundOverlay(): void {\n    this.renderer.setStyle(this.overlay, 'transition', `opacity ${this.animationDuration}ms ease`);\n    this.renderer.setStyle(this.overlay, 'background-color', 'rgba(255,255,255,0)');\n  }\n\n  private resetElementStyles(): void {\n    this.renderer.setStyle(this.element, 'transition', 'transform 0s ease');\n    this.renderer.setStyle(this.element, 'webkitTransform', 'translate3d(0, 0, 0) rotate(0deg)');\n  }\n\n  private isSwipePositive(event): boolean {\n    return (this.orientation === 'y' && event.deltaY < 0) || (this.orientation !== 'y' && event.deltaX > 0);\n  }\n\n  private removeOverlay(like: boolean): void {\n    const {offsetHeight, offsetWidth, clientHeight, clientWidth} = this.element;\n    const y = (offsetHeight + clientHeight) * (like ? -1 : 1);\n    const x = (offsetWidth + clientWidth) * (like ? 1 : -1);\n\n    this.setBackgroundOverlay(like, 0.35);\n    this.translate({\n      x, y,\n      rotate: (x * 20) / clientWidth,\n      duration: 800\n    });\n  }\n\n  private handleSwipeEnd(like: boolean): void {\n    this.removeOverlay(like);\n    this.isReleased = true;\n\n    this.timeoutId = window.setTimeout(() => {\n      this.swiped.emit(like);\n      this.released.emit();\n      this.destroy();\n    }, this.animationDuration);\n  }\n\n  public simulateSwipe(like: boolean) {\n    this.handleSwipeEnd(like);\n  }\n}\n","import {AfterContentInit, Component, ContentChildren, OnInit, QueryList} from '@angular/core';\nimport {SwipeableDirective} from './swipeable.directive';\n\n@Component({\n  selector: 'sw-card-wrapper',\n  template: `\n    <ng-content></ng-content>`,\n  styles: [`:host {\n    position: relative;\n    display: block;\n  }`]\n})\nexport class CardWrapperComponent implements OnInit, AfterContentInit {\n  @ContentChildren(SwipeableDirective)\n  public cards: QueryList<SwipeableDirective>;\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n  ngAfterContentInit(): void {\n  }\n\n  public like(): void {\n    if (this.cards.first) {\n      this.cards.first.simulateSwipe(true);\n    }\n  }\n\n  public dislike(): void {\n    if (this.cards.first) {\n      this.cards.first.simulateSwipe(false);\n    }\n  }\n\n}\n","import {NgModule} from '@angular/core';\nimport {CardWrapperComponent} from './card-wrapper.component';\nimport {SwipeableDirective} from './swipeable.directive';\n\n@NgModule({\n  imports: [],\n  declarations: [CardWrapperComponent, SwipeableDirective],\n  exports: [CardWrapperComponent, SwipeableDirective]\n})\nexport class SwipeCardLibModule {\n}\n"],"names":["InjectionToken","EventEmitter","Directive","Inject","ElementRef","Renderer2","HostBinding","Input","Output","HostListener","Component","ContentChildren","NgModule"],"mappings":";;;;;;;;;;AAAA;QAEA;YACE,cAAS,GAAY,YAAY,CAAC;YAClC,iBAAY,GAAY,SAAS,CAAC;SACnC;QAAD,wBAAC;IAAD,CAAC,IAAA;;AAED,QAAa,6BAA6B,GAAG,IAAIA,mBAAc,CAAC,+BAA+B,EAAE;QAC/F,UAAU,EAAE,MAAM;QAClB,OAAO,EAAE,qCAAqC;KAC/C,CAAC;;;;AAEF;QACE,OAAO,IAAI,iBAAiB,EAAE,CAAC;IACjC,CAAC;;;;;;ACdD;QAsEE,4BAA2D,cAAiC,EACtE,EAAc,EACjB,QAAmB;YAFqB,mBAAc,GAAd,cAAc,CAAmB;YACtE,OAAE,GAAF,EAAE,CAAY;YACjB,aAAQ,GAAR,QAAQ,CAAW;YAtDrB,sBAAiB,GAAG,GAAG,CAAC;YACjC,eAAU,GAAY,KAAK,CAAC;YAe7B,UAAK,GAAY,KAAK,CAAC;YAGvB,gBAAW,GAAG,IAAI,CAAC;YAGnB,aAAQ,GAAG,IAAIC,iBAAY,EAAE,CAAC;YAG9B,WAAM,GAAG,IAAIA,iBAAY,EAAW,CAAC;YAGrC,cAAS,GAAG,IAAI,CAAC;YA2BtB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,aAAa,CAAC;SACjC;;;;;QAzBD,kCAAK;;;;YADL,UACM,KAAU;gBACd,IAAI,IAAI,CAAC,UAAU,EAAE;oBACnB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;iBAC/B;aACF;;;;;QAGD,qCAAQ;;;;YADR,UACS,KAAU;gBACjB,IAAI,IAAI,CAAC,UAAU,EAAE;;wBACb,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC;;wBACjG,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC;;wBACjG,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC;oBAExC,CAAC,UAAU,IAAI,UAAU,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;iBACnF;aACF;QAED,sBAAI,0CAAU;;;gBAAd;gBACE,OAAO,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;aACxC;;;WAAA;;;;QAQD,wCAAW;;;YAAX;gBACE,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACrC;;;;QAED,qCAAQ;;;YAAR;gBACE,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACzB,IAAI,CAAC,aAAa,GAAG,EAAC,CAAC,EAAE,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,EAAC,CAAC;aAC9D;;;;QAEO,8CAAiB;;;YAAzB;gBACE,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC7C,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,oBAAoB,CAAC;gBAC9C,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;aACvD;;;;;QAEO,sCAAS;;;;YAAjB,UAAkB,EAAgC;oBAA/B,QAAC,EAAE,QAAC,EAAE,cAAU,EAAV,+BAAU,EAAE,gBAAY,EAAZ,iCAAY;;oBACzC,SAAS,GAAG,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;;oBACzD,SAAS,GAAG,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;gBAE/D,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,YAAY,EAAE,eAAa,QAAQ,YAAS,CAAC,CAAC;gBACnF,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,EAAE,iBAAe,SAAS,YAAO,SAAS,sBAAiB,MAAM,SAAM,CAC5H,CAAC;aACH;;;;;QAEO,8CAAiB;;;;YAAzB,UAA0B,KAAU;;oBAC5B,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC;;oBAClC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW;gBAEzE,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;gBACzC,IAAI,CAAC,SAAS,CAAC;oBACb,CAAC,EAAE,KAAK,CAAC,MAAM;oBACf,CAAC,EAAE,KAAK,CAAC,MAAM;oBACf,MAAM,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;iBACzD,CAAC,CAAC;aACJ;;;;QAEO,8CAAiB;;;YAAzB;gBACE,IAAI,CAAC,sBAAsB,EAAE,CAAC;gBAC9B,IAAI,CAAC,SAAS,CAAC;oBACb,CAAC,EAAE,CAAC;oBACJ,CAAC,EAAE,CAAC;oBACJ,MAAM,EAAE,CAAC;oBACT,QAAQ,EAAE,IAAI,CAAC,iBAAiB;iBACjC,CAAC,CAAC;aACJ;;;;QAEO,oCAAO;;;YAAf;gBACE,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC1B,IAAI,CAAC,sBAAsB,EAAE,CAAC;gBAC9B,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;gBACtD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;aACrB;;;;;;QAEO,iDAAoB;;;;;YAA5B,UAA6B,IAAa,EAAE,OAAe;;oBACnD,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY;gBAErF,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,YAAY,EAAE,iBAAiB,CAAC,CAAC;gBACtE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,kBAAkB,EAAE,UAAQ,KAAK,UAAK,OAAO,CAAC,QAAQ,EAAE,MAAG,CAAC,CAAC;aACnG;;;;QAEO,mDAAsB;;;YAA9B;gBACE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,YAAY,EAAE,aAAW,IAAI,CAAC,iBAAiB,YAAS,CAAC,CAAC;gBAC/F,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,kBAAkB,EAAE,qBAAqB,CAAC,CAAC;aACjF;;;;QAEO,+CAAkB;;;YAA1B;gBACE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,YAAY,EAAE,mBAAmB,CAAC,CAAC;gBACxE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,EAAE,mCAAmC,CAAC,CAAC;aAC9F;;;;;QAEO,4CAAe;;;;YAAvB,UAAwB,KAAK;gBAC3B,OAAO,CAAC,IAAI,CAAC,WAAW,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,MAAM,IAAI,CAAC,WAAW,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aACzG;;;;;QAEO,0CAAa;;;;YAArB,UAAsB,IAAa;gBAC3B,IAAA,iBAAqE,EAApE,8BAAY,EAAE,4BAAW,EAAE,8BAAY,EAAE,4BAAW;;oBACrD,CAAC,GAAG,CAAC,YAAY,GAAG,YAAY,KAAK,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;;oBACnD,CAAC,GAAG,CAAC,WAAW,GAAG,WAAW,KAAK,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBAEvD,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;gBACtC,IAAI,CAAC,SAAS,CAAC;oBACb,CAAC,GAAA,EAAE,CAAC,GAAA;oBACJ,MAAM,EAAE,CAAC,CAAC,GAAG,EAAE,IAAI,WAAW;oBAC9B,QAAQ,EAAE,GAAG;iBACd,CAAC,CAAC;aACJ;;;;;QAEO,2CAAc;;;;YAAtB,UAAuB,IAAa;gBAApC,iBASC;gBARC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;gBACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBAEvB,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,UAAU,CAAC;oBACjC,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvB,KAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;oBACrB,KAAI,CAAC,OAAO,EAAE,CAAC;iBAChB,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;aAC5B;;;;;QAEM,0CAAa;;;;YAApB,UAAqB,IAAa;gBAChC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;aAC3B;;oBAlKFC,cAAS,SAAC;wBACT,QAAQ,EAAE,eAAe;qBAC1B;;;;wBAJsC,iBAAiB,uBA0DzCC,WAAM,SAAC,6BAA6B;wBApEjDC,eAAU;wBAQFC,cAAS;;;;4BAehBC,gBAAW,SAAC,gBAAgB,cAC5BC,UAAK;6BAGLD,gBAAW,SAAC,iBAAiB,cAC7BC,UAAK;4BAGLA,UAAK;kCAGLA,UAAK;+BAGLC,WAAM;6BAGNA,WAAM;gCAGNF,gBAAW,SAAC,uBAAuB;4BAGnCG,iBAAY,SAAC,KAAK,EAAE,CAAC,QAAQ,CAAC;+BAO9BA,iBAAY,SAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC;;QA0HpC,yBAAC;KAAA;;;;;;ACjLD;QAgBE;SACC;;;;QAED,uCAAQ;;;YAAR;aACC;;;;QAED,iDAAkB;;;YAAlB;aACC;;;;QAEM,mCAAI;;;YAAX;gBACE,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;oBACpB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;iBACtC;aACF;;;;QAEM,sCAAO;;;YAAd;gBACE,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;oBACpB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBACvC;aACF;;oBAhCFC,cAAS,SAAC;wBACT,QAAQ,EAAE,iBAAiB;wBAC3B,QAAQ,EAAE,iCACkB;wBAC5B,MAAM,EAAE,CAAC,4DAGP,CAAC;qBACJ;;;;4BAEEC,oBAAe,SAAC,kBAAkB;;QAwBrC,2BAAC;KAAA;;;;;;ACrCD;QAIA;SAMC;;oBANAC,aAAQ,SAAC;wBACR,OAAO,EAAE,EAAE;wBACX,YAAY,EAAE,CAAC,oBAAoB,EAAE,kBAAkB,CAAC;wBACxD,OAAO,EAAE,CAAC,oBAAoB,EAAE,kBAAkB,CAAC;qBACpD;;QAED,yBAAC;KAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
