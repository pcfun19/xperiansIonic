{"version":3,"file":"ng-swipe-card.js.map","sources":["ng://ng-swipe-card/lib/swipe-card.config.ts","ng://ng-swipe-card/lib/swipeable.directive.ts","ng://ng-swipe-card/lib/card-wrapper.component.ts","ng://ng-swipe-card/lib/swipe-card-lib.module.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\n\nexport class SWSwipeCardConfig {\n  likeColor?: string = '104,159,56';\n  dislikeColor?: string = '193,3,2';\n}\n\nexport const SW_SWIPE_CARD_DEFAULT_OPTIONS = new InjectionToken('sw-swipe-card-default-options', {\n  providedIn: 'root',\n  factory: SW_SWIPE_CARD_DEFAULT_OPTIONS_FACTORY\n});\n\nexport function SW_SWIPE_CARD_DEFAULT_OPTIONS_FACTORY() {\n  return new SWSwipeCardConfig();\n}\n","import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output, Renderer2,\n} from '@angular/core';\nimport {SW_SWIPE_CARD_DEFAULT_OPTIONS, SWSwipeCardConfig} from './swipe-card.config';\n\n@Directive({\n  selector: '[swSwipeable]',\n})\nexport class SwipeableDirective implements OnInit, OnDestroy {\n  private readonly animationDuration = 200;\n  private isReleased: Boolean = false;\n  private element: HTMLElement;\n  private overlay: HTMLElement;\n  private releaseRadius: { x: number, y: number };\n  private timeoutId: number;\n\n  @HostBinding('style.width.px')\n  @Input()\n  public width: number;\n\n  @HostBinding('style.height.px')\n  @Input()\n  public height: number;\n\n  @Input()\n  public fixed: Boolean = false;\n\n  @Input()\n  public orientation = 'xy';\n\n  @Output()\n  public released = new EventEmitter();\n\n  @Output()\n  public swiped = new EventEmitter<boolean>();\n\n  @HostBinding('class.swipe-card-heap')\n  public className = true;\n\n  @HostListener('pan', ['$event'])\n  onPan(event: any) {\n    if (this.allowSwipe) {\n      this.handleSwipeChange(event);\n    }\n  }\n\n  @HostListener('panend', ['$event'])\n  onPanEnd(event: any) {\n    if (this.allowSwipe) {\n      const conditionX = this.orientation.includes('x') && this.releaseRadius.x < Math.abs(event.deltaX || 0);\n      const conditionY = this.orientation.includes('y') && this.releaseRadius.y < Math.abs(event.deltaY || 0);\n      const like = this.isSwipePositive(event);\n\n      (conditionX || conditionY) ? this.handleSwipeEnd(like) : this.handleCancelSwipe();\n    }\n  }\n\n  get allowSwipe(): boolean {\n    return !this.fixed && !this.isReleased;\n  }\n\n  constructor(@Inject(SW_SWIPE_CARD_DEFAULT_OPTIONS) private _defaultConfig: SWSwipeCardConfig,\n              protected el: ElementRef,\n              public renderer: Renderer2) {\n    this.element = el.nativeElement;\n  }\n\n  ngOnDestroy(): void {\n    window.clearTimeout(this.timeoutId);\n  }\n\n  ngOnInit(): void {\n    this.initializeOverlay();\n    this.releaseRadius = {x: this.width / 4, y: this.height / 4};\n  }\n\n  private initializeOverlay(): void {\n    this.overlay = document.createElement('div');\n    this.overlay.className = 'swipe-card-overlay';\n    this.renderer.appendChild(this.element, this.overlay);\n  }\n\n  private translate({x, y, rotate = 0, duration = 0}) {\n    const positionX = x && this.orientation.includes('x') ? (x) : 0;\n    const positionY = y && this.orientation.includes('y') ? (y) : 0;\n\n    this.renderer.setStyle(this.element, 'transition', `transform ${duration}ms ease`);\n    this.renderer.setStyle(this.element, 'webkitTransform', `translate3d(${positionX}px, ${positionY}px, 0) rotate(${rotate}deg)`\n    );\n  }\n\n  private handleSwipeChange(event: any) {\n    const like = this.isSwipePositive(event);\n    const opacity = Math.abs(event.distance) * 0.5 / this.element.offsetWidth;\n\n    this.setBackgroundOverlay(like, opacity);\n    this.translate({\n      x: event.deltaX,\n      y: event.deltaY,\n      rotate: ((event.deltaX * 20) / this.element.clientWidth)\n    });\n  }\n\n  private handleCancelSwipe() {\n    this.resetBackgroundOverlay();\n    this.translate({\n      x: 0,\n      y: 0,\n      rotate: 0,\n      duration: this.animationDuration\n    });\n  }\n\n  private destroy() {\n    this.resetElementStyles();\n    this.resetBackgroundOverlay();\n    this.renderer.removeChild(this.element, this.overlay);\n    this.overlay = null;\n  }\n\n  private setBackgroundOverlay(like: boolean, opacity: number) {\n    const color = like ? this._defaultConfig.likeColor : this._defaultConfig.dislikeColor;\n\n    this.renderer.setStyle(this.overlay, 'transition', 'opacity 0s ease');\n    this.renderer.setStyle(this.overlay, 'background-color', `rgba(${color}, ${opacity.toString()})`);\n  }\n\n  private resetBackgroundOverlay(): void {\n    this.renderer.setStyle(this.overlay, 'transition', `opacity ${this.animationDuration}ms ease`);\n    this.renderer.setStyle(this.overlay, 'background-color', 'rgba(255,255,255,0)');\n  }\n\n  private resetElementStyles(): void {\n    this.renderer.setStyle(this.element, 'transition', 'transform 0s ease');\n    this.renderer.setStyle(this.element, 'webkitTransform', 'translate3d(0, 0, 0) rotate(0deg)');\n  }\n\n  private isSwipePositive(event): boolean {\n    return (this.orientation === 'y' && event.deltaY < 0) || (this.orientation !== 'y' && event.deltaX > 0);\n  }\n\n  private removeOverlay(like: boolean): void {\n    const {offsetHeight, offsetWidth, clientHeight, clientWidth} = this.element;\n    const y = (offsetHeight + clientHeight) * (like ? -1 : 1);\n    const x = (offsetWidth + clientWidth) * (like ? 1 : -1);\n\n    this.setBackgroundOverlay(like, 0.35);\n    this.translate({\n      x, y,\n      rotate: (x * 20) / clientWidth,\n      duration: 800\n    });\n  }\n\n  private handleSwipeEnd(like: boolean): void {\n    this.removeOverlay(like);\n    this.isReleased = true;\n\n    this.timeoutId = window.setTimeout(() => {\n      this.swiped.emit(like);\n      this.released.emit();\n      this.destroy();\n    }, this.animationDuration);\n  }\n\n  public simulateSwipe(like: boolean) {\n    this.handleSwipeEnd(like);\n  }\n}\n","import {AfterContentInit, Component, ContentChildren, OnInit, QueryList} from '@angular/core';\nimport {SwipeableDirective} from './swipeable.directive';\n\n@Component({\n  selector: 'sw-card-wrapper',\n  template: `\n    <ng-content></ng-content>`,\n  styles: [`:host {\n    position: relative;\n    display: block;\n  }`]\n})\nexport class CardWrapperComponent implements OnInit, AfterContentInit {\n  @ContentChildren(SwipeableDirective)\n  public cards: QueryList<SwipeableDirective>;\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n  ngAfterContentInit(): void {\n  }\n\n  public like(): void {\n    if (this.cards.first) {\n      this.cards.first.simulateSwipe(true);\n    }\n  }\n\n  public dislike(): void {\n    if (this.cards.first) {\n      this.cards.first.simulateSwipe(false);\n    }\n  }\n\n}\n","import {NgModule} from '@angular/core';\nimport {CardWrapperComponent} from './card-wrapper.component';\nimport {SwipeableDirective} from './swipeable.directive';\n\n@NgModule({\n  imports: [],\n  declarations: [CardWrapperComponent, SwipeableDirective],\n  exports: [CardWrapperComponent, SwipeableDirective]\n})\nexport class SwipeCardLibModule {\n}\n"],"names":[],"mappings":"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"}
